---
title: توابع اصلی در چرخه عمر Unity
sidebar_position: 10
---

# توابع اصلی در چرخه عمر Unity

| تابع                                      | زمان اجرا                                              | فقط در Editor؟ | توضیح کاربردی                                                              | مثال ساده                                                        |
| ----------------------------------------- | ------------------------------------------------------ | -------------- | -------------------------------------------------------------------------- | ---------------------------------------------------------------- |
| **Awake()**                               | وقتی گیم‌آبجکت فعال می‌شه (حتی قبل از اجرای بازی)      | ❌             | مقداردهی اولیه اجزای داخلی. حتی قبل از `Start` اجرا می‌شه.                 | `rb = GetComponent<Rigidbody>();`                                |
| **OnEnable()**                            | هر بار که آبجکت فعال (Enable) می‌شه                    | ❌             | موقع فعال شدن گیم‌آبجکت یا دوباره فعال شدن بعد از غیرفعال بودن اجرا می‌شه. | `Debug.Log("Enabled!");`                                         |
| **Start()**                               | اولین فریم بعد از اجرای بازی (اگر گیم‌آبجکت فعال باشه) | ❌             | آماده‌سازی نهایی، مثل دسترسی به سایر آبجکت‌ها                              | `enemy = GameObject.Find("Enemy");`                              |
| **Update()**                              | هر فریم یک بار اجرا می‌شه                              | ❌             | رفتار اصلی بازی، ورودی‌ها، حرکت‌ها و ...                                   | `transform.Translate(Vector3.forward * speed * Time.deltaTime);` |
| **LateUpdate()**                          | در پایان هر فریم (بعد از Update)                       | ❌             | تنظیماتی مثل دنبال کردن دوربین بعد از حرکت اشیاء                           | `camera.position = player.position + offset;`                    |
| **FixedUpdate()**                         | در بازه‌های زمانی ثابت (نه هر فریم)                    | ❌             | مناسب برای فیزیک و Rigidbody                                               | `rb.AddForce(Vector3.up * force);`                               |
| **OnDisable()**                           | وقتی گیم‌آبجکت غیرفعال بشه                             | ❌             | قطع اتصال‌ها، متوقف کردن coroutineها                                       | `StopAllCoroutines();`                                           |
| **OnDestroy()**                           | موقع نابود شدن گیم‌آبجکت                               | ❌             | پاک‌سازی نهایی، مثل آزاد کردن منابع                                        | `Debug.Log("Object destroyed");`                                 |
| **OnValidate()**                          | وقتی در Inspector مقداری تغییر کنه (در Edit Mode)      | ✅ بله         | اصلاح یا بررسی مقدار فیلدها قبل از اجرای بازی                              | `health = Mathf.Clamp(health, 0, 100);`                          |
| **Reset()**                               | وقتی اسکریپت به گیم‌آبجکت اضافه می‌شه                  | ✅ بله         | مقداردهی پیش‌فرض به فیلدها                                                 | `speed = 5f;`                                                    |
| **OnApplicationQuit()**                   | موقع بستن بازی (فقط در Build نه در Editor)             | ❌             | ذخیره داده‌ها یا پاک‌سازی                                                  | `SaveProgress();`                                                |
| **OnTriggerEnter(Collider other)**        | وقتی جسمی وارد ترایگر بشه                              | ❌             | بررسی برخوردها                                                             | `if (other.CompareTag("Enemy")) Die();`                          |
| **OnCollisionEnter(Collision collision)** | برخورد فیزیکی با جسم دیگر                              | ❌             | کنترل واکنش‌ها به برخورد                                                   | `Destroy(collision.gameObject);`                                 |

## نکات مهم

-   Awake() همیشه قبل از Start() اجرا می‌شه، حتی اگر گیم‌آبجکت غیرفعال باشه.

-   Update() به FPS وابسته است ولی FixedUpdate() برای فیزیک و زمان‌بندی دقیق‌تر استفاده می‌شه.

-   LateUpdate() معمولاً برای دوربین‌ها استفاده می‌شه که باید بعد از جابه‌جایی کاراکتر، موقعیت خودشون رو تنظیم کنن.

-   OnValidate() فقط در زمان طراحی (Edit Mode) و در تغییرات Inspector اجرا می‌شه.

-   Reset() فقط یک بار و وقتی اسکریپت را به GameObject اضافه می‌کنی اجرا می‌شه.

## جدول توابع اصلی Unity به ترتیب اجرا

| متد                               | زمان اجرا                                                           | توضیح کاربردی                                       |
| --------------------------------- | ------------------------------------------------------------------- | --------------------------------------------------- |
| `Reset()`                         | فقط یک‌بار، هنگام اضافه کردن اسکریپت به آبجکت                       | مقداردهی اولیه پیش‌فرض                              |
| `OnValidate()`                    | در زمان ویرایش (Edit Mode)، وقتی مقداری در Inspector تغییر کند      | بررسی یا اصلاح داده‌های Inspector در زمان طراحی     |
| `Awake()`                         | فقط یک‌بار، هنگام بارگذاری اسکریپت (حتی اگر گیم‌آبجکت غیرفعال باشد) | مقداردهی داخلی اولیه، آماده‌سازی اجزای درون اسکریپت |
| `OnEnable()`                      | هر زمان که گیم‌آبجکت فعال (Enabled) شود                             | ثبت رویدادها، شروع Coroutine، یا روشن کردن سیستم    |
| `Start()`                         | اولین فریم بعد از فعال شدن اسکریپت                                  | تنظیم اولیه وابسته به آبجکت‌های دیگر                |
| `Update()`                        | در هر فریم (وابسته به FPS)                                          | رفتار بازی، ورودی‌ها، حرکت دوربین و...              |
| `LateUpdate()`                    | در انتهای هر فریم، بعد از `Update()`                                | دنبال کردن کاراکتر توسط دوربین و رفتارهای ثانویه    |
| `FixedUpdate()`                   | در بازه‌های زمانی ثابت (مستقل از فریم)                              | به‌ویژه برای فیزیک و Rigidbody                      |
| `OnTriggerEnter(Collider other)`  | وقتی جسمی وارد ناحیه‌ی Trigger شود                                  | واکنش به ورود به ناحیه خاص                          |
| `OnTriggerStay(Collider other)`   | هر فریم که جسمی داخل Trigger باقی بماند                             | کنترل مداوم داخل Trigger                            |
| `OnTriggerExit(Collider other)`   | وقتی جسمی از Trigger خارج شود                                       | واکنش به خروج از ناحیه                              |
| `OnCollisionEnter(Collision col)` | برخورد فیزیکی شروع شود                                              | برخورد فیزیکی مثل تیر یا زمین خوردن                 |
| `OnCollisionStay(Collision col)`  | جسم همچنان در تماس باشد                                             | ادامه برخورد                                        |
| `OnCollisionExit(Collision col)`  | تماس فیزیکی پایان یابد                                              | خروج از برخورد                                      |
| `OnDisable()`                     | وقتی گیم‌آبجکت غیرفعال شود                                          | توقف رویدادها، coroutineها یا انصراف از اشتراک      |
| `OnDestroy()`                     | وقتی گیم‌آبجکت نابود شود                                            | پاک‌سازی نهایی یا حذف منابع                         |
| `OnApplicationQuit()`             | زمانی که بازی بسته می‌شود (فقط در Build)                            | ذخیره داده‌ها، خاموش کردن سیستم‌ها                  |


:::tip
خیر، در بیشتر موارد تابع OnApplicationQuit() اجرا نمی‌شود اگر کاربر بازی را از طریق روش‌هایی مثل:

کشیدن (swipe) اپ از task manager (recents)

پینچره کردن (gesture-based exit)

بستن اجباری از تنظیمات (Force Close)

یا خاموش شدن ناگهانی گوشی

خارج کند.
:::